(this["webpackJsonpblog-xl"]=this["webpackJsonpblog-xl"]||[]).push([[0],{39:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),s=n(31),r=n.n(s),i=n(6),o=(n(39),n(7)),l=n(14),u=n.n(l),b=n(16),j=n(4),d=n(25),O=(n(41),n(50),d.a.initializeApp({apiKey:"AIzaSyDH6qgdUSNG54Q5boVg6CDks0fmY_cDPHU",authDomain:"movie-search-db.firebaseapp.com",databaseURL:"https://movie-search-db.firebaseio.com",projectId:"movie-search-db",storageBucket:"movie-search-db.appspot.com",messagingSenderId:"270785248528",appId:"1:270785248528:web:f30492ff20710d000d7995",measurementId:"G-K6RF0TX3EE"}));d.a.firestore().settings({timestampsInSnapshots:!0});var h=O.auth(),p=d.a,m=n(1),x=a.a.createContext();function g(e){var t=Object(c.useState)(),n=Object(j.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!0),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)([]),b=Object(j.a)(u,2),d=b[0],O=(b[1],Object(c.useState)([])),g=Object(j.a)(O,2),f=g[0],v=g[1];Object(c.useEffect)((function(){return h.onAuthStateChanged((function(e){s(e),l(!1)}))}),[]);var y={user:a,signin:function(e,t){return h.signInWithEmailAndPassword(e,t)},signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},signout:function(){return h.signOut()},rstPass:function(e){return h.sendPasswordResetEmail(e)},post:function(e){var t=new Date,n=p.firestore();n.collection("post").add(e).then((function(e){return n.collection("post").doc(e.id).update({id:e.id,date:t.toString()})}))},data:d,getDoc:function(){p.firestore().collection("post").onSnapshot((function(e){v(e.docs.map((function(e){return e.data()})))}))},doc:f,updateUser:function(e){p.auth().currentUser.updateProfile({displayName:e,photoURL:"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png"})},deleteBlog:function(e){p.firestore().collection("post").doc(e).delete()},updateBlog:function(e,t){p.firestore().collection("post").doc(t).update({body:e})}};return Object(m.jsx)(x.Provider,{value:y,children:!o&&e.children})}var f=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(j.a)(s,2),l=r[0],d=r[1],O=Object(c.useState)(null),h=Object(j.a)(O,2),p=h[0],g=h[1],f=Object(c.useState)(!1),v=Object(j.a)(f,2),y=(v[0],v[1]),N=Object(c.useContext)(x).signin,S=Object(o.g)();function w(){return(w=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,g(""),y(!0),e.next=6,N(n,l);case 6:S.push("/ProfilePage"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g("Failed to sign in: ".concat(e.t0.message));case 12:y(!1),a(""),d("");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"form-area",children:[Object(m.jsx)("h1",{children:"Sign In"}),p&&Object(m.jsx)("h4",{className:"error",children:p}),Object(m.jsxs)("form",{className:"form",onSubmit:function(e){return w.apply(this,arguments)},children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),Object(m.jsx)("input",{required:!0,value:n,type:"email",className:"input",name:"email",placeholder:"e.g. xyz@abc.com",onChange:function(e){a(e.target.value)}}),Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(m.jsx)("input",{required:!0,value:l,type:"password",className:"input",name:"password",placeholder:"Your Password",onChange:function(e){d(e.target.value)}}),Object(m.jsx)("button",{className:"btn btn-signin",type:"submit",children:"Sign in"}),Object(m.jsx)("p",{style:{textAlign:"center",margin:"0 auto"},children:"or"}),Object(m.jsx)("input",{type:"button",className:"btn btn-google",value:"Sign in with Google"}),Object(m.jsxs)("p",{style:{textAlign:"center",margin:"0.2em auto",fontSize:"0.9em"},children:["Don't have an account?"," ",Object(m.jsx)(i.b,{to:"SignUp",className:"sub-link",children:"Sign up here"})]}),Object(m.jsx)("p",{style:{textAlign:"center",margin:"0.2em auto",fontSize:"0.8em"},children:Object(m.jsx)(i.b,{to:"PasswordReset",className:"sub-link",children:"Forgot Password?"})})]})]})};var v=function(){var e=Object(c.useContext)(x),t=e.signup,n=e.updateUser,a=Object(c.useState)(""),s=Object(j.a)(a,2),r=s[0],o=s[1],l=Object(c.useState)(""),d=Object(j.a)(l,2),O=d[0],h=d[1],p=Object(c.useState)(""),g=Object(j.a)(p,2),f=g[0],v=g[1],y=Object(c.useState)(""),N=Object(j.a)(y,2),S=N[0],w=N[1],P=Object(c.useState)(null),k=Object(j.a)(P,2),C=k[0],B=k[1],U=Object(c.useState)(!1),D=Object(j.a)(U,2),A=D[0],E=D[1];function F(){return(F=Object(b.a)(u.a.mark((function e(c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),f===S){e.next=3;break}return e.abrupt("return",B("Passwords do not match!"));case 3:return e.prev=3,B(""),E(!0),e.next=8,t(O,f);case 8:return e.next=10,n(r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),B("Failed to create an account: ".concat(e.t0.message));case 15:E(!1),o(""),h(""),v(""),w("");case 20:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"form-area",children:[Object(m.jsx)("h1",{children:"Sign Up"}),Object(m.jsxs)("form",{className:"form",onSubmit:function(e){return F.apply(this,arguments)},children:[C&&Object(m.jsx)("h4",{className:"error",children:C}),Object(m.jsx)("label",{htmlFor:"displayName",className:"label",children:"User Name"}),Object(m.jsx)("input",{required:!0,value:r,type:"text",className:"input",name:"displayName",placeholder:"e.g. John123",onChange:function(e){o(e.target.value)}}),Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),Object(m.jsx)("input",{required:!0,value:O,type:"email",className:"input",name:"email",placeholder:"e.g. xyz@abc.com",onChange:function(e){h(e.target.value)}}),Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Password"}),Object(m.jsx)("input",{required:!0,value:f,type:"password",className:"input",name:"password",placeholder:"Your Password",onChange:function(e){v(e.target.value)}}),Object(m.jsx)("label",{htmlFor:"confirmedPassword",className:"label",children:"Password Confirmation"}),Object(m.jsx)("input",{required:!0,value:S,type:"password",className:"input",name:"confirmedPassword",placeholder:"Re-type Your Password",onChange:function(e){w(e.target.value)}}),Object(m.jsx)("button",{disabled:A,className:"btn btn-signup",type:"submit",children:"Sign up"}),Object(m.jsx)("p",{style:{textAlign:"center",margin:"0 auto"},children:"or"}),Object(m.jsx)("input",{type:"button",className:"btn btn-google",value:"Sign in with Google"}),Object(m.jsxs)("p",{style:{textAlign:"center",margin:"0.2em auto",fontSize:"0.8em"},children:["Already have an account"," ",Object(m.jsx)(i.b,{to:"/",className:"sub-link",children:"Sign in here"})]})]})]})};var y=function(){return Object(m.jsxs)("ul",{className:"nav",children:[Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/ProfilePage",children:"Profile Page"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/Dashboard",children:"Dashboard"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/create",children:"New Blog"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/Home",children:"Home"})}),Object(m.jsx)("li",{children:Object(m.jsx)(i.b,{to:"/PasswordReset",children:"Reset Password"})})]})};var N=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(j.a)(s,2),o=r[0],l=r[1],d=Object(c.useState)(null),O=Object(j.a)(d,2),h=O[0],p=O[1],g=Object(c.useContext)(x).rstPass,f=Object(c.useState)(!1),v=Object(j.a)(f,2),y=(v[0],v[1]);function N(){return(N=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,l(""),p(""),y(!0),e.next=7,g(n);case 7:l("An email has been sent. Check your inbox for further details."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p(e.t0.message);case 13:a(""),y(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"form-area",children:[Object(m.jsx)("h1",{children:"Password Reset"}),Object(m.jsxs)("form",{action:"",className:"form",onSubmit:function(e){return N.apply(this,arguments)},children:[o&&Object(m.jsx)("h4",{className:"success",children:o}),h&&Object(m.jsx)("h4",{className:"error",children:h}),Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Email"}),Object(m.jsx)("input",{required:!0,value:n,type:"email",className:"input",name:"email",placeholder:"Enter your email",onChange:function(e){a(e.target.value)}}),Object(m.jsx)("button",{className:"btn btn-reset",type:"submit",children:"Send me a reset link"}),Object(m.jsx)(i.b,{to:"/",className:"sub-link",children:"\u2190 Back to sign in page"})]})]})},S=function(){var e=Object(c.useContext)(x),t=e.user,n=e.signout,a=e.updateUser,s=e.data,r=Object(c.useState)(""),i=Object(j.a)(r,2),l=i[0],d=i[1],O=Object(o.g)();function h(){return(h=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(""),e.prev=1,e.next=4,n();case 4:O.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),d("Failed to sign out: ".concat(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{background:"url(".concat(t.photoURL||"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png",")  no-repeat center center"),backgroundSize:"cover",height:"100px",width:"100px"}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:s.ad}),Object(m.jsx)("h3",{children:t&&t.email})]})]}),l&&Object(m.jsx)("h3",{className:"error",children:l}),Object(m.jsx)("button",{onClick:function(){return function(){return h.apply(this,arguments)}()},children:"Sign out"}),Object(m.jsx)("button",{onClick:function(){a(),console.log(t.photoURL)},children:"USER"})]})},w=n(34),P=function(e){var t=e.par,n=e.index,a=e.setBody,s=e.body,r=Object(c.useState)(t),i=Object(j.a)(r,2),o=i[0],l=i[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("textarea",{className:"blog-body-par",onChange:function(e){var t=e.target.value;l(t),a((function(){return s.map((function(e,c){return c===n?e=t:e}))}))},value:o})})},k=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(j.a)(s,2),i=r[0],l=r[1],u=Object(c.useState)(""),b=Object(j.a)(u,2),d=b[0],O=b[1],h=Object(c.useState)(!1),p=Object(j.a)(h,2),g=p[0],f=p[1],v=Object(o.g)(),y=Object(c.useContext)(x),N=y.post,S=y.user.displayName;return Object(m.jsx)("div",{className:"create",children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:n,body:i,author:S};f(!0),N(t),f(!1),v.push("/home")},children:[Object(m.jsx)("label",{children:"Blog title"}),Object(m.jsx)("input",{required:!0,type:"text",value:n,onChange:function(e){return a(e.target.value)}}),Object(m.jsxs)("div",{className:"blog-body",children:[Object(m.jsx)("label",{children:"Blog body"}),i.map((function(e,t){return Object(m.jsx)(P,{index:t,par:e,body:i,setBody:l})})),Object(m.jsx)("textarea",{required:!0,value:d,onChange:function(e){return O(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(console.log("Enter key was hit."),l((function(e){return[].concat(Object(w.a)(e),[d])})),O(""))}})]}),!g&&Object(m.jsx)("button",{children:"Add blog"}),g&&Object(m.jsx)("button",{disabled:!0,children:"Adding blog..."})]})})},C=n(17),B=n(24),U=function(e){var t=e.component,n=Object(B.a)(e,["component"]),a=Object(c.useContext)(x).user;return Object(m.jsx)(o.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return a?Object(m.jsx)(t,Object(C.a)({},e)):Object(m.jsx)(o.a,{to:"/"})}}))},D=function(e){var t=e.component,n=e.restricted,a=Object(B.a)(e,["component","restricted"]),s=Object(c.useContext)(x).user;return Object(m.jsx)(o.b,Object(C.a)(Object(C.a)({},a),{},{render:function(e){return s&&n?Object(m.jsx)(o.a,{to:"/ProfilePage"}):Object(m.jsx)(t,Object(C.a)({},e))}}))};function A(){var e=Object(c.useContext)(x).updateUser;return Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:e("Musa Bas"),children:"musa"})})}var E=function(e){var t=e.blogs,n=e.title;return Object(m.jsxs)("div",{className:"blog-list",children:[Object(m.jsx)("h2",{children:n}),t.map((function(e){return Object(m.jsx)("div",{className:"blog-preview",children:Object(m.jsxs)(i.b,{to:"/blogs/".concat(e.id),children:[Object(m.jsx)("h2",{children:e.title}),Object(m.jsxs)("p",{children:["Written by: ",e.author]})]})},e.id)}))]})};function F(){var e=Object(c.useContext)(x),t=e.getDoc,n=e.doc;return Object(c.useEffect)((function(){t()}),[]),Object(m.jsx)("div",{className:"home",children:n&&Object(m.jsx)(E,{blogs:n,title:"All Blogs"})})}var R=function(e){var t=e.id,n=e.deleteBlog,c=Object(o.g)();return Object(m.jsx)("button",{onClick:function(){n(t),c.push("/home")},children:"delete"})},q=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(o.h)().id,r=Object(c.useContext)(x),i=r.doc,l=r.deleteBlog,u=r.updateBlog,b=r.user,d=i.filter((function(e){return e.id===s})),O=Object(j.a)(d,1)[0],h=Object(c.useState)(O.body),p=Object(j.a)(h,2),g=p[0],f=p[1],v=Object(c.useState)(b.displayName===O.author),y=Object(j.a)(v,2),N=y[0];y[1];return Object(m.jsx)("div",{className:"blog-details",children:O&&Object(m.jsxs)("article",{children:[Object(m.jsx)("h2",{children:O.title}),Object(m.jsxs)("p",{className:"blog-author",children:["Written by ",O.author]}),Object(m.jsx)("div",{className:"blog-body",children:O.body.map((function(e,t){return n?Object(m.jsx)(P,{index:t,par:e,body:g,setBody:f}):Object(m.jsx)("p",{children:e})}))}),Object(m.jsx)("p",{className:"blog-date",children:O.date}),N&&Object(m.jsx)(R,{id:s,deleteBlog:l}),n&&N&&Object(m.jsx)("button",{onClick:function(){u(g,s),a((function(e){return!e}))},children:"save"}),!n&&N&&Object(m.jsx)("button",{onClick:function(){return a((function(e){return!e}))},children:"edit"})]})})};var I=function(){return Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(y,{}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(D,{exact:!0,path:"/",restricted:!0,component:f}),Object(m.jsx)(U,{path:"/ProfilePage",component:S}),Object(m.jsx)(U,{path:"/create",component:k}),Object(m.jsx)(U,{path:"/Dashboard",component:A}),Object(m.jsx)(U,{path:"/Home",component:F}),Object(m.jsx)(o.b,{path:"/blogs/:id",children:Object(m.jsx)(q,{})}),Object(m.jsx)(o.b,{path:"/SignUp",children:Object(m.jsx)(v,{})}),Object(m.jsx)(o.b,{path:"/PasswordReset",children:Object(m.jsx)(N,{})})]})})]})};r.a.render(Object(m.jsx)(g,{children:Object(m.jsx)(i.a,{children:Object(m.jsx)(I,{})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.8dc113dc.chunk.js.map